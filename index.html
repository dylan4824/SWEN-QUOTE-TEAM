<html>
  <head>
    <title>NEETball analysis</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <!--<script src="jquery-2.1.4.min.js" charset="utf-8"></script>-->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  </head>
    <body>
	    <table align="center">
	    	<tr>
	    		<td class="dropdown">
			    <button class="btn btn-default dropdown-toggle" type="button" id="menu1" data-toggle="dropdown">
			    	Round
			    	<span class="caret">
			    	</span>
			    </button>
			    <ul class="dropdown-menu " role="menu1" aria-labelledby="menu1">
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">1</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">2</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">3</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">4</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">5</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">6</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">7</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">8</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">9</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">10</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">11</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">12</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">13</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">14</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">15</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">16</a></li>
			      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">17</a></li>
			    </ul>
			</td>
			<!--------------------------------------------->
			<td class="dropdown">
		    	<button class="btn btn-default dropdown-toggle" type="button" id="menu2" data-toggle="dropdown">
		    		Season
		    		<span class="caret">
		    		</span>
			    </button>
			    <ul class="dropdown-menu" role="menu2" aria-labelledby="menu2">
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">2008</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">2009</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">2010</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">2011</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">2012</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">2013</a></li>
			    </ul>
			</td>
			  <!--------------------------------------------->
			  <td class="dropdown">
			    <button class="btn btn-default dropdown-toggle" type="button" id="menu4" data-toggle="dropdown">
			    	Home Team
			    	<span class="caret">
			    	</span>
			    </button>
			    <ul class="dropdown-menu" role="menu4" aria-labelledby="menu4">
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Northern Mystics</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Queensland Firebirds</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Southern Steel</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Canturybury Tactix</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Melbourne Vixens</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Central Pulse</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Adelaide Thunderbirds</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Waikato Bay of Plenty Magic</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">West Coast Fever</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">New South Wales Swifts</a></li>
			    </ul>
			</td>
			  <!--------------------------------------------->
			  <td class="dropdown">
			    <button class="btn btn-default dropdown-toggle" type="button" id="menu5" data-toggle="dropdown">
			    	Away Team
			    	<span class="caret">
			    	</span>
			    </button>
			    <ul class="dropdown-menu" role="menu5" aria-labelledby="menu5">
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Northern Mystics</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Queensland Firebirds</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Southern Steel</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Canturybury Tactix</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Melbourne Vixens</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Central Pulse</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Adelaide Thunderbirds</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Waikato Bay of Plenty Magic</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">West Coast Fever</a></li>
			    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">New South Wales Swifts</a></li>
			    </ul>
			</td>
			<!--------------------------------------------->
			  <td class="dropdown">
			    <button class="btn btn-default dropdown-toggle" type="button" id="menu8" data-toggle="dropdown">
			    	Venue
			    	<span class="caret">
			    	</span>
			    </button>
			    <ul class="dropdown-menu" role="menu8" aria-labelledby="menu8">
			         <li role="presentation"><a role="menuitem" tabindex="-1" href="#">TSB Bank Arena, Wellington</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Brisbane Convention and Exhibition Centre</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Trusts Stadium, Auckland</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Energy Events Centre, Rotorua</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Acer Arena, Sydney</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">CBS Canterbury Arena, Christchurch</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">State Netball and Hockey Centre, Melbourne</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Challenge Stadium, Perth</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Newcastle Entertainment Centre</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Vodafone Arena, Melbourne</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Mystery Creek Events Centre, Hamilton</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">ETSA Park, Adelaide</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Sydney Olympic Park Sports Centre</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Stadium Southland, Invercargill</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Arena Manawatu, Palmerston North</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Edgar Centre, Dunedin</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Pettigrew Green Arena, Napier</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Hisense Arena, Melbourne</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Te Rauparaha Arena, Porirua</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Adelaide Arena, Adelaide</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Queen Elizabeth Youth Centre, Tauranga</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">2013</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">2013</a></li>
               <li role="presentation"><a role="menuitem" tabindex="-1" href="#">2013</a></li>
			    </ul>
			</td>
			  <!--------------------------------------------->
			  <td class="dropdown">
			    <button class="btn btn-default dropdown-toggle" type="button" id="menu9" data-toggle="dropdown">
			    	Overtime
			    	<span class="caret">
			    	</span>
			    </button>
			    <ul class="dropdown-menu" role="menu9" aria-labelledby="menu9">

			    </ul>
			</td>
			    	<!--------------------------------------------->
			    	<td class="dropdown">
			    <button class="btn btn-default dropdown-toggle" type="button" id="menu10" data-toggle="dropdown">
			    	Wins
			    	<span class="caret">
			    	</span>
			    </button>
			    <ul class="dropdown-menu" role="menu11" aria-labelledby="menu10">

			    </ul>
			</td>
			  <!--------------------------------------------->
			  <td class="dropdown">
			    <button class="btn btn-default dropdown-toggle" type="button" id="menu11" data-toggle="dropdown">
			    	Losses
			    	<span class="caret">
			    	</span>
			    </button>
			    <ul class="dropdown-menu" role="menu11" aria-labelledby="menu11">

			    </ul>
			</td>
		</tr>
	</table>

	<script>
var tables = ["2008-Table1.csv",
	      "2009-Table1.csv",
	      "2010-Table1.csv",
	      "2011-Table1.csv",
	      "2012-Table1.csv",
	      "2013-Table1.csv"
	     ]
var tableData = new Array()
readData()

function readData(){
	for(var i = 0; i < tables.length; i++){
		readYear(i)
	}
}

function readYear (i){
	d3.csv( tables[i], function(d) {
		if(d.Score != ""){
			return{
				Round: d.Round,
				Date: d.Date,
				Year: tables[i].replace(/(^\d+)(.+$)/i,'$1'),
				HomeTeam: d['Home Team'],
				AwayTeam: d['Away Team'],
				HomeScore: d.Score.match(/^\d+|\d+\b|\d+(?=\w)/g)[0],
				AwayScore: d.Score.match(/^\d+|\d+\b|\d+(?=\w)/g)[1],
				Overtime:  d.Score.match(/^\d+|\d+\b|\d+(?=\w)/g)[3] != null,
				Venue: d.Venue,
				Winner: winner(d.Score.match(/^\d+|\d+\b|\d+(?=\w)/g)[0], d.Score.match(/^\d+|\d+\b|\d+(?=\w)/g)[1], d['Home Team'], d['Away Team']),
        Disabled: false
			};
		}
    },function(error, table){
		//console.log(table)
		assign(table)
		//console.log(tableData)
	});
}

 function assign(table){
  tableData.push(table)
 }

function winner(HomeScore, AwayScore, HomeTeam, AwayTeam){
  if(HomeScore > AwayScore){
    return HomeTeam
  }
  else if (HomeScore == AwayScore) {
    return null
  }
  return AwayTeam

}

var windowSize = window;
var windWidth = windowSize.innerWidth;
var windHeight = windowSize.innerHeight;

function initialiseCanvas() {

	return d3.select("body")
		.append("svg")
		.attr("width", windWidth*0.8)
		.attr("height", windHeight*0.6);
}

var teams = ["Adelaide Thunderbirds", "Melbourne Vixens", "New South Wales Swifts", 
				"Queensland Firebirds", "West Coast Fever", "Canterbury Tactix", "Central Pulse", "Northern Mystics", "Southern Steel", "Waikato Bay of Plenty Magic"];

function drawGraph(teamName) {
	drawLine()
	for (var i = 0; i < teamName.length; i++) {
		drawImg(0.1*windHeight, 0.1*windWidth, 100, i*50, "resources/" + teamName[i] + ".png");
	}
}

function getTotalScores(data) {
}

function drawRect(width, height, x, y, color){
	return canvas.append*("rect")
		.attr("width", width)
		.attr("height", height)
		.attr("x", x)
		.attr("y", y)
		.attr("color", color);
}

function drawLine(x1, x2, y1. y2, color){
	return canvas.append*("line")
		.attr("x1", x1)
		.attr("x2", x2)
		.attr("y1", y1)
		.attr("y2", y2)
		.attr("color", color);
}

function drawImg(width, height, x, y, imgLink){
	return canvas.append("image")
		.attr("width", width)
		.attr("height", height)
		.attr("x", x)
		.attr("y", y)
		.attr("xlink:href", imgLink);
}



var canvas = initialiseCanvas();
drawGraph(teams);

	  </script>
    </body>
</html>
